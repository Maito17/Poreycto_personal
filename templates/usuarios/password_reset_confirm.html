{% extends 'base_simple.html' %}
{% block content %}
<div class="w-full flex justify-center items-center min-h-screen">
    <div class="w-full max-w-sm p-8 bg-white rounded-2xl shadow-2xl border border-gray-100">
        <div class="flex flex-col items-center mb-6">
            <div class="bg-indigo-100 rounded-full p-1 mb-2">
                <svg class="w-6 h-6 text-indigo-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m0-6v2m-6 4v-1a4 4 0 014-4h4a4 4 0 014 4v1" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
            </div>
            <h2 class="text-2xl font-extrabold text-indigo-700 mb-1 text-center">Nueva contraseña</h2>
            <p class="text-gray-600 text-center text-sm">Ingresa tu nueva contraseña para tu cuenta.</p>
        </div>
    {% if not error %}
        <form method="post" class="space-y-6" onsubmit="return validarPasswords();">
            {% csrf_token %}
            <div>
                <label for="new_password" class="block text-gray-700 font-semibold mb-2">Nueva contraseña</label>
                <input type="password" name="new_password" id="new_password" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 placeholder-gray-400" placeholder="Escribe tu nueva contraseña">
            </div>
            <div>
                <label for="confirm_password" class="block text-gray-700 font-semibold mb-2">Confirma tu contraseña</label>
                <input type="password" name="confirm_password" id="confirm_password" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 placeholder-gray-400" placeholder="Confirma tu nueva contraseña">
            </div>
            <div id="password-error" class="hidden text-red-600 text-sm mb-2"></div>
            <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg shadow-md transition">Cambiar contraseña</button>
        </form>
        <script>
        function validarPasswords() {
            var pass1 = document.getElementById('new_password').value;
            var pass2 = document.getElementById('confirm_password').value;
            var errorDiv = document.getElementById('password-error');
            if (pass1 !== pass2) {
                errorDiv.textContent = 'Las contraseñas no coinciden.';
                errorDiv.classList.remove('hidden');
                return false;
            } else {
                errorDiv.classList.add('hidden');
                return true;
            }
        }
        </script>
    {% endif %}
    {% if error %}
        <div class="mt-6 flex items-center justify-center text-red-600 bg-red-50 border border-red-200 rounded-lg p-3">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.332 16c-.77 1.333.192 3 1.732 3z"/></svg>
            <span>{{ error }}</span>
        </div>
    {% endif %}
    {% if success %}
        <div class="mt-6 flex items-center justify-center text-green-700 bg-green-50 border border-green-200 rounded-lg p-3">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
            <span>{{ success }}</span>
        </div>
    {% endif %}
    <div class="mt-8 text-center">
        <a href="{% url 'usuarios:login' %}" class="text-indigo-500 hover:underline font-medium">Volver a iniciar sesión</a>
    </div>
</div>
{% endblock %}